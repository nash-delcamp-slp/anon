% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/anon_data_summary.R
\name{anon_data_summary}
\alias{anon_data_summary}
\title{Generate anonymized summary of data objects in an environment}
\usage{
anon_data_summary(
  envir = globalenv(),
  pattern_list = list(),
  default_replacement = "**REDACTED**",
  check_approximate = TRUE,
  max_distance = 2
)
}
\arguments{
\item{envir}{An environment or list containing the objects to summarize. When passed as a list,
unnamed elements will automatically be given names (either derived from the function call
or indexed as "x1", "x2", etc.). Default is \code{globalenv()}.}

\item{pattern_list}{A list of patterns to search for and replace. Can include:
\itemize{
\item Named elements where names are replacement values and values are one or more patterns to match
\item Unnamed elements where one or more patterns are replaced with \code{default_replacement}
}}

\item{default_replacement}{Value to use as the default replacement value when no specific replacement
is provided. Default is \code{"**REDACTED**"}.}

\item{check_approximate}{Logical indicating whether to check for approximate
matches using string distance. Default is \code{TRUE}.}

\item{max_distance}{Maximum string distance for approximate matching when
\code{check_approximate} is \code{TRUE}. Default is \code{2}.}
}
\value{
An object of class \code{"anon_data_summary"} containing:
\itemize{
\item \verb{$summary}: A tibble with overall statistics (total objects, data frames count,
other objects count, total memory usage)
\item \verb{$data_frames}: A list with two elements (only present if data frames exist):
\itemize{
\item \verb{$structure}: A tibble with structural information for each data frame
(name, label, dimensions, memory size)
\item \verb{$variables}: A tibble with detailed variable information including data types,
missing values, distinct values, and labels
}
\item All content is anonymized according to the specified patterns
}
}
\description{
This function creates a summary of all objects (primarily data frames) in a specified
environment or list, then anonymizes the results using the same pattern matching
approach as \code{\link[=anon]{anon()}}. It provides structural information about data frames
including dimensions, variable details, and memory usage while protecting sensitive
information through pattern-based redaction.
}
\details{
The function operates in a few key steps:
\enumerate{
\item Generates detailed summaries for all objects
\item Creates structured output with summary statistics and detailed information about data frames
\item Applies anonymization using \code{\link[=anon]{anon()}} with the provided patterns
}

For data frames, the function captures:
\itemize{
\item Structural information: dimensions, memory usage, and data frame-level labels
\item Variable details: data types, missing value counts, distinct value counts, and variable labels
}

The output includes a custom print method that displays the information in a
readable format while maintaining the anonymization.
}
\examples{
# Create study data with sensitive study codes in variable names
study_results <- data.frame(
  participant_id = c("P001", "P002", "P003"),
  ABC123_RESULT = c(85.2, 92.1, 78.5),
  ABC123_BASELINE = c(80.0, 88.3, 75.2),
  CBA321_RESULT = c(45.1, 52.3, 41.8),
  CBA321_BASELINE = c(42.0, 49.1, 39.5),
  age = c(45, 32, 67)
)

# Study metadata containing the same sensitive study codes as values
study_metadata <- list(
  primary_study = "ABC123",
  secondary_study = "CBA321",
  principal_investigator = "Dr. Smith",
  site_location = "Boston Medical Center"
)

# Create environment summary with anonymization
env_list <- list(study_results = study_results, metadata = study_metadata)

# Use metadata values to inform anonymization patterns
# This will anonymize both the variable names (ABC123_RESULT, CBA321_RESULT, etc.)
# and the corresponding values in the metadata
env_list |>
  anon_data_summary(
    pattern_list = list(
      "STUDY_A" = study_metadata$primary_study,    # "ABC123"
      "STUDY_B" = study_metadata$secondary_study,  # "CBA321"
      "MEDICAL_CENTER" = "Boston Medical Center"
    )
  )

}
\seealso{
\code{\link[=anon]{anon()}} for the underlying anonymization function
}
