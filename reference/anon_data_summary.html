<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate anonymized summary of data objects in an environment — anon_data_summary • anon</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate anonymized summary of data objects in an environment — anon_data_summary"><meta name="description" content="This function creates a summary of all objects (primarily data frames) in a specified
environment or list, then anonymizes the results using the same pattern matching
approach as anon(). It provides structural information about data frames
including dimensions, variable details, and memory usage while protecting sensitive
information through pattern-based redaction."><meta property="og:description" content="This function creates a summary of all objects (primarily data frames) in a specified
environment or list, then anonymizes the results using the same pattern matching
approach as anon(). It provides structural information about data frames
including dimensions, variable details, and memory usage while protecting sensitive
information through pattern-based redaction."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">anon</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate anonymized summary of data objects in an environment</h1>

      <div class="d-none name"><code>anon_data_summary.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates a summary of all objects (primarily data frames) in a specified
environment or list, then anonymizes the results using the same pattern matching
approach as <code><a href="anon.html">anon()</a></code>. It provides structural information about data frames
including dimensions, variable details, and memory usage while protecting sensitive
information through pattern-based redaction.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">anon_data_summary</span><span class="op">(</span></span>
<span>  envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">globalenv</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  pattern_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  default_replacement <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"anon.default_replacement"</span>, default <span class="op">=</span> <span class="st">"[REDACTED]"</span><span class="op">)</span>,</span>
<span>  check_approximate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  max_distance <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-envir">envir<a class="anchor" aria-label="anchor" href="#arg-envir"></a></dt>
<dd><p>An environment or list containing the objects to summarize. When passed as a list,
unnamed elements will automatically be given names (either derived from the function call
or indexed as "x1", "x2", etc.). Default is <code><a href="https://rdrr.io/r/base/environment.html" class="external-link">globalenv()</a></code>.</p></dd>


<dt id="arg-pattern-list">pattern_list<a class="anchor" aria-label="anchor" href="#arg-pattern-list"></a></dt>
<dd><p>A list of patterns to search for and replace. Can include:</p><ul><li><p>Named elements where names are replacement values and values are one or more patterns to match</p></li>
<li><p>Unnamed elements where one or more patterns are replaced with <code>default_replacement</code>
This parameter is combined with the global option <code>getOption("anon.pattern_list")</code>.</p></li>
</ul></dd>


<dt id="arg-default-replacement">default_replacement<a class="anchor" aria-label="anchor" href="#arg-default-replacement"></a></dt>
<dd><p>Value to use as the default replacement value when no specific replacement
is provided. Default is <code>getOption("anon.default_replacement", default = "\[REDACTED\]")</code>.</p></dd>


<dt id="arg-check-approximate">check_approximate<a class="anchor" aria-label="anchor" href="#arg-check-approximate"></a></dt>
<dd><p>Logical indicating whether to check for approximate
matches using string distance. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-max-distance">max_distance<a class="anchor" aria-label="anchor" href="#arg-max-distance"></a></dt>
<dd><p>Maximum string distance for approximate matching when
<code>check_approximate</code> is <code>TRUE</code>. Default is <code>2</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>"anon_data_summary"</code> containing:</p><ul><li><p><code>$summary</code>: A tibble with overall statistics (total objects, data frames count,
other objects count, total memory usage)</p></li>
<li><p><code>$data_frames</code>: A list with two elements (only present if data frames exist):</p><ul><li><p><code>$structure</code>: A tibble with structural information for each data frame
(name, label, dimensions, memory size)</p></li>
<li><p><code>$variables</code>: A tibble with detailed variable information including data types,
missing values, distinct values, and labels</p></li>
</ul></li>
<li><p>All content is anonymized according to the specified patterns</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function operates in a few key steps:</p><ol><li><p>Generates detailed summaries for all objects</p></li>
<li><p>Creates structured output with summary statistics and detailed information about data frames</p></li>
<li><p>Applies anonymization using <code><a href="anon.html">anon()</a></code> with the provided patterns</p></li>
</ol><p>For data frames, the function captures:</p><ul><li><p>Structural information: dimensions, memory usage, and data frame-level labels</p></li>
<li><p>Variable details: data types, missing value counts, distinct value counts, and variable labels</p></li>
</ul><p>The output includes a custom print method that displays the information in a
readable format while maintaining the anonymization.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="anon.html">anon()</a></code> for the underlying anonymization function</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create study data with sensitive study codes in variable names</span></span></span>
<span class="r-in"><span><span class="va">study_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  participant_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P001"</span>, <span class="st">"P002"</span>, <span class="st">"P003"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ABC123_RESULT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">85.2</span>, <span class="fl">92.1</span>, <span class="fl">78.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ABC123_BASELINE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80.0</span>, <span class="fl">88.3</span>, <span class="fl">75.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  CBA321_RESULT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">45.1</span>, <span class="fl">52.3</span>, <span class="fl">41.8</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  CBA321_BASELINE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">42.0</span>, <span class="fl">49.1</span>, <span class="fl">39.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">45</span>, <span class="fl">32</span>, <span class="fl">67</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Study metadata containing the same sensitive study codes as values</span></span></span>
<span class="r-in"><span><span class="va">study_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  primary_study <span class="op">=</span> <span class="st">"ABC123"</span>,</span></span>
<span class="r-in"><span>  secondary_study <span class="op">=</span> <span class="st">"CBA321"</span>,</span></span>
<span class="r-in"><span>  principal_investigator <span class="op">=</span> <span class="st">"Dr. Smith"</span>,</span></span>
<span class="r-in"><span>  site_location <span class="op">=</span> <span class="st">"Boston Medical Center"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create environment summary with anonymization</span></span></span>
<span class="r-in"><span><span class="va">env_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>study_results <span class="op">=</span> <span class="va">study_results</span>, metadata <span class="op">=</span> <span class="va">study_metadata</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use metadata values to inform anonymization patterns</span></span></span>
<span class="r-in"><span><span class="co"># This will anonymize both the variable names (ABC123_RESULT, CBA321_RESULT, etc.)</span></span></span>
<span class="r-in"><span><span class="co"># and the corresponding values in the metadata</span></span></span>
<span class="r-in"><span><span class="va">env_list</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">anon_data_summary</span><span class="op">(</span></span></span>
<span class="r-in"><span>    pattern_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"STUDY_A"</span> <span class="op">=</span> <span class="va">study_metadata</span><span class="op">$</span><span class="va">primary_study</span>,    <span class="co"># "ABC123"</span></span></span>
<span class="r-in"><span>      <span class="st">"STUDY_B"</span> <span class="op">=</span> <span class="va">study_metadata</span><span class="op">$</span><span class="va">secondary_study</span>,  <span class="co"># "CBA321"</span></span></span>
<span class="r-in"><span>      <span class="st">"MEDICAL_CENTER"</span> <span class="op">=</span> <span class="st">"Boston Medical Center"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Environment Data Summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ========================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   total_objects data_frames other_objects total_memory</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             2           1             1         2752</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data Frames:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         name       type n_rows n_cols memory_size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 [REDACTED] data.frame      3      6      1.7 Kb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variable Details (study_results):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           variable data_type n_distinct n_missing n_total pct_missing label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   participant_id character          3         0       3           0  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   STUDY_A_RESULT   numeric          3         0       3           0  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 STUDY_A_BASELINE   numeric          3         0       3           0  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   STUDY_B_RESULT   numeric          3         0       3           0  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 STUDY_B_BASELINE   numeric          3         0       3           0  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6              age   numeric          3         0       3           0  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Other Objects:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         name type length element_types memory_size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 [REDACTED] list      4     character        1 Kb</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nash Delcamp.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

